# tg2emall 日志轮转配置
# 位置: /etc/logrotate.d/tg2emall

# 前端服务日志
/data/tg2emall/logs/frontend/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 root root
    postrotate
        # 重启前端服务以重新打开日志文件
        docker restart tg2em-frontend
    endscript
}

# 采集服务日志
/data/tg2emall/logs/scraper/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 root root
    postrotate
        # 重启采集服务以重新打开日志文件
        docker restart tg2em-scrape
    endscript
}

# tgState服务日志
/data/tg2emall/logs/tgstate/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 root root
    postrotate
        # 重启tgState服务以重新打开日志文件
        docker restart tg2em-tgstate
    endscript
}

# 管理服务日志
/data/tg2emall/logs/admin/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 root root
    postrotate
        # 重启管理服务以重新打开日志文件
        docker restart tg2em-admin
    endscript
}

# 统一服务日志
/data/tg2emall/logs/unified/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 root root
    postrotate
        # 重启统一服务以重新打开日志文件
        docker restart tg2em-unified
    endscript
}

# 系统级日志（如果存在）
/data/tg2emall/logs/system/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 root root
}
